<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="../css/dangnhap.css">
  <title>ĐĂNG NHẬP</title>
</head>

<body>
  <form id="login-form" class="was-validated">
    <h3>ĐĂNG NHẬP</h3> <br>
    <label for="email">Tên đăng nhập:</label>
    <!-- <input type="text" id="username" name="username" required> -->
    <input type="email" class="form-control" id="login-email" placeholder="Enter email" name="email" required>
    <div class="invalid-feedback">Tài khoản không được để trống.</div> <br>
    <label for="password">Mật khẩu:</label>
    <!-- <input type="password" id="password" name="password" required> -->
    <input type="password" class="form-control" id="login-password" placeholder="Enter password" name="pswd" required>
    <div class="invalid-feedback">Mật khẩu không được để trống.</div>
    <!-- đăng kí tài khoản -->
    <div>Bạn chưa có tài khoản? mời bạn <a href="./dangki.html">đăng kí</a></div> <br>
    <!-- đăng nhập -->
    <button onclick="dangNhap(event)" type="submit">Đăng nhập</button>
    <div class="invalid-feedback" id="login-error-message" style="display: none;">Tài Khoản Hoặc Mật Khẩu Không Chính Xác!</div>

  </form>

  <!-- <script src="../js/dangnhap.js"></script> -->
  <script>
    function dangNhap(event) {
    event.preventDefault();
    let email = document.getElementById("login-email").value;
    let password = document.getElementById("login-password").value;
    let saveLocal = JSON.parse(localStorage.getItem("dangKi")) || [];
    let user = saveLocal.find((user) => user.email === email && user.password1 === password);
    if (user) {
      localStorage.setItem("login",1);
      // Thông tin đăng nhập chính xác thì chuyển trang
      window.location.href = "../index.html";
    } else {
      localStorage.setItem("login",0)
      // Thông tin đăng nhập không chính xác thì hiển thị thông báo lỗi
      document.getElementById("login-error-message").style.display = "block";
    };
    var x = document.getElementById("login-error-message");
    x.className = "show";
    setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
  };

  </script>


</body>

</html>